.menubar {
	
	// Positioning & size
	@include narrow-layout { height: auto; }
	@include medium-layout { height: $menubar-height-medium; }
	@include widest-layout { height: $menubar-height-widest; }

	// Never display input elements
	input { display: none; }
	
	@include narrow-layout {

		// Only displayed when the menu symbol is checked
		display: none;

		// Display the menu items vertically.
		flex-direction: column;
			
		// Appearances
		background: $menubar-background-narrow;
			
		// Make sure the separator is empty
		.item-separator:after { content: none; }
		.item-separator {
			//display: block;
			width: 100%;
			height: $menubar-item-separator-line-width-narrow;
			background-color: $menubar-item-separator-line-color-narrow;
		}
			
		.item,
		.item-narrow-only {
			
			// Layout
			display: flex;
			flex-direction: column;
			
			// Make the link areas as big as possible
			a {	width: 100%; height: 100%; }
				
			// Remove link underlining
			a { text-decoration: none; }
			
			// If the checkbox is checked
			input:checked ~ {

				// Show submenu
				.dropdown, .dropdown-narrow { display: flex; }

				// When the submenu is open, show the appropriate symbol
				.title .symbol .code:after { content: $menubar-item-title-symbol-code-open-narrow; }
			}

			.title {
				
				// Layout
				display: flex;
				height: $menubar-item-height-narrow;
				
				// Use the item color for all elements & Hover effect
				background: $menubar-item-background-narrow;
				&:hover {
					background: $menubar-item-background-hover-narrow;
				}

				.symbol {

					// Layout: Center the disclosure symbol
					display: flex;
					justify-content: center;
					align-items: center;
					
					// The width of the tap area with the disclosure symbol in it
					width: $menubar-item-disclosure-symbol-width-narrow;
					
					// Load the disclosure symbol for the closed state
					.code:after { content: $menubar-item-title-symbol-code-closed-narrow; }
				
					// Show a clickable symbol over the disclosure symbol
					.code { cursor: pointer; }
				}
					
				.text {

					// Layout: Center vertically and justify-left
					display: flex;
					justify-content: start;
					align-items: center;
					
					 // Takes up remainder of .title width
					.text { width: 100%; }

					// Use the item color for all elements & Hover effect
					p { color: $menubar-item-color-narrow; }
					&:hover {
						p { color: $menubar-item-hover-color-narrow; }
					}

				}
			}
		
			.dropdown,
			.dropdown-narrow {
				
				// Disable submenu by default
				display: none;
				
				// Subitems are stacked vertically
				flex-direction: column;
					
				.subitem-separator {
					display: block;
					width: 100%;
					height: $menubar-subitem-separator-line-width-narrow;
					background-color: $menubar-subitem-separator-line-color-narrow;
				}
					
				.subitem {
				
					// If the checkbox is checked
					input:checked ~ {

						// Show submenu
						.sub-dropdown, .sub-dropdown-narrow { display: flex; }

						// When the submenu is open, show the appropriate symbol
						.title .symbol .code:after { content: $menubar-subitem-title-symbol-code-open-narrow; }
					}

					.title {
						
						// Layout (row oriented)
						display: flex;
					
						// Appearance
						background: $menubar-subitem-background-narrow;
						
						.symbol { width: $menubar-item-disclosure-symbol-width-narrow; }
						
						.text a {
							display: flex;
							justify-content: start;
							align-items: center;
						}
						
						p { padding-left: $menubar-subitem-indent-narrow; }
					}
					
					.sub-dropdown,
					.sub-dropdown-narrow {
						
						// Disable by default
						display: none;
						
						// Subitems are stacked vertically
						flex-direction: column;
					
						.subsubitem-separator {
							display: block;
							width: 100%;
							height: $menubar-subitem-separator-line-width-narrow;
							background-color: $menubar-subitem-separator-line-color-narrow;
						}
					}
				}
			}
		}
		
		.isActiveSelection { background: $menubar-item-background-selected-narrow; }
	}
			
	@include medium-and-widest-layout {

		// Check if it must be displayed
		@include medium-layout { @if $menubar-enabled-medium { display: flex; } @else { display: none; } }
		@include widest-layout { @if $menubar-enabled-widest { display: flex; } @else { display: none; } }

		// Appearances
		@include medium-layout {
			background: $menubar-background-medium;
			border: $menubar-border-medium;
			box-shadow: $menubar-box-shadow-medium;
		}
		@include widest-layout {
			background: $menubar-background-widest;
			border: $menubar-border-widest;
			box-shadow: $menubar-box-shadow-widest;
		}

		// Positioning of items and item-separators.
		flex-direction: row;
		@include medium-layout {
			justify-content: $menubar-justify-content-medium;
			align-items: $menubar-align-items-medium;
		}
		@include widest-layout {
			justify-content: $menubar-justify-content-widest;
			align-items: $menubar-align-items-widest;
		}

		.menubar-icon {
				
			@include medium-layout {
				width: $menubar-icon-width-medium;
				height: $menubar-icon-height-medium;
				content: $menubar-icon-url-medium;
				padding: $menubar-icon-padding-medium;
			}
			@include widest-layout {
				width: $menubar-icon-width-widest;
				height: $menubar-icon-height-widest;
				content: $menubar-icon-url-widest;
				padding: $menubar-icon-padding-widest;
			}
		}

		.item-separator {
	
			@include medium-layout {

				// Appearance
				color: $menubar-item-separator-symbol-color-medium;
				background: $menubar-item-separator-symbol-background-medium;
			
				// Set padding
				padding: $menubar-item-separator-symbol-padding-medium;
	
				// Set the separator symbol
				p:after { content: $menubar-item-separator-symbol-medium; }

				// The font for the separator
				p { font: $menubar-item-separator-symbol-font-medium; }
			}
					
			@include widest-layout {
				
				// Appearance
				color: $menubar-item-separator-symbol-color-widest;
				background: $menubar-item-separator-symbol-background-widest;

				// Set padding
				padding: $menubar-item-separator-symbol-padding-widest;
	
				// Set the separator symbol
				p:after { content: $menubar-item-separator-symbol-widest; }

				// The font for the separator
				p { font: $menubar-item-separator-symbol-font-widest; }
			}
		}
			
		// Make all p's as small as possible
		p { margin: 0; padding: 0; }
		
		.item-narrow-only { display: none; }
		
		.item {
			
			// Vertical layout
			display: flex;
			flex-direction: column;		
			
			// Make this the baseline reverence for the dropdown box
			position: relative;
			
			// Hover effect
			@include medium-layout {
				p { color: $menubar-item-color-medium; }
				background: $menubar-item-background-medium;
				&:hover {
					p { color: $menubar-item-hover-color-medium; }
					background: $menubar-item-background-hover-medium;
				}
			}
			@include widest-layout {
				p { color: $menubar-item-color-widest; }
				background: $menubar-item-background-widest;
				&:hover {
					p { color: $menubar-item-hover-color-widest; }
					background: $menubar-item-background-hover-widest;
				}
			}
				
			// Make the entire hightlight block clickable
			a {	display: block; }
				
			// Remove the link underlining
			a { text-decoration: none; }

			// Prevent wrapping of the (sub) menu items
			p { white-space: nowrap; }
			
			@include medium-layout {
				
				// Sizing of the items
				a, .paddingAsLink { padding: $menubar-item-padding-medium;}
					
				// Font for the item text
				p { font: $menubar-item-font-medium; }
			}
			@include widest-layout {

				// Sizing of the items
				a, .paddingAsLink { padding: $menubar-item-padding-widest;}
	
				// Font for the item text
				p { font: $menubar-item-font-widest; }
			}

			// Display the submenu if the user hovers the mouse over it
			&:hover .dropdown { display: block; }

			// Display the submenu if the user taps the corresponding menu item
			//input:checked ~ .dropdown-narrow { display: block; }					

			.title {
				@include medium-layout { height: $menubar-item-height-medium; }
				@include widest-layout { height: $menubar-item-height-widest; }
			}
			
			.dropdown,
			.dropdown-narrow {
				
				// Visibility depends on hovering over the item
				display: none;

				// Don't show the separators
				.subitem-separator { display: none; }
					
				// Position the dropdown below the item.
				position: absolute;
				top: 100%;
								
				// Appearances
				@include medium-layout {
					margin: $menubar-dropdown-margin-medium;
					padding: $menubar-dropdown-padding-medium;
					background: $menubar-dropdown-background-medium;
					border: $menubar-dropdown-border-medium;
					box-shadow: $menubar-dropdown-box-shadow-medium;
				}
				@include widest-layout {
					margin: $menubar-dropdown-margin-widest;
					padding: $menubar-dropdown-padding-widest;
					background: $menubar-dropdown-background-widest;
					border: $menubar-dropdown-border-widest;
					box-shadow: $menubar-dropdown-box-shadow-widest;
				}

				.subitem {
													
					@include medium-layout {
						
						// Hover effect
						p { color: $menubar-subitem-color-medium; }
						background: $menubar-subitem-background-medium;
						&:hover {
							p { color: $menubar-subitem-hover-color-medium; }
							background: $menubar-subitem-background-hover-medium;
						}

						// Sizing of the subitems
						a, .paddingAsLink { padding: $menubar-subitem-padding-medium; }
							
						// Font for subitem text
						p { font: $menubar-subitem-font-medium; }
					}
					@include widest-layout {
						
						// Hover effect
						p { color: $menubar-subitem-color-widest; }
						background: $menubar-subitem-background-widest;
						&:hover {
							p { color: $menubar-subitem-hover-color-widest; }
							background: $menubar-subitem-background-hover-widest;
						}

						// Sizing of the subitems
						a, .paddingAsLink { padding: $menubar-subitem-padding-widest; }
							
						// Font for subitem text
						p { font: $menubar-subitem-font-widest; }
					}
				}

				// Show selection for pages that match a menu entry
				@include medium-layout { .isActiveSelection { background: $menubar-subitem-background-selected-medium; } }
				@include widest-layout { .isActiveSelection { background: $menubar-subitem-background-selected-widest; } }
			}
		}
			
		// Show selection for pages that match a menu entry
		@include medium-layout { .isActiveSelection { background: $menubar-item-background-selected-medium; } }
		@include widest-layout { .isActiveSelection { background: $menubar-item-background-selected-widest; } }
	}
}