<!-- The icon in the top-left side, content and size set through CSS3 -->
<div class="navbanner-icon"></div>

<!-- Title of the site is always visible -->
<div class="navbanner-title">
	<p>{{ site.title }}</p>
</div>

<!-- The menu symbol will only be shown on narrow and medium layout -->
<div class="navbanner-label">
	<label for="menu-checkbox"><p><!-- empty but necessary! --></p></label> 
</div>
<input type="checkbox" id="menu-checkbox">

<!-- Separator between banner and navigation bar. Visibility depends on screen width. -->
<div class="nav-top-divider"></div>

<!-- Navigation bar visibility depends on screen width. -->
<nav class="navbanner-menu">

	<!-- Create a list of top menu item titles -->
	{% assign topTitles = "" | split: "" %}
	{% assign sortedPages = site.pages | sort: 'menuTopIndex' %} <!-- sorts empty tags first, then numerically -->
	{% for ape in sortedPages %}
		{% if ape.menuInclude == true and ape.menuTopTitle %}
			{% assign topTitles = topTitles | push: ape.menuTopTitle %}
		{% endif %}
	{% endfor %}
	{% assign topTitles = topTitles | reverse | uniq | reverse %} <!-- remove emtpy, stay numerically -->

	<!-- Using the above list, create the menu and submenu's -->
	<ul>
			
		<!-- Home page -->
		{% assign home = 'Home' %}
		{% if site.tHome %}{% assign home = site.tHome %}{% endif %}
		<li>
			<div class="menu-item">
				<div class="menu-item-symbol"></div>
				<div class="menu-item-title"><a href="/"><p>{{ home }}</p></a></div>
			</div>
		</li>
		
		<!-- Page menus -->
		{% for topTitle in topTitles %}
		
			<!-- Create a list of sub menu item titles -->
			{% assign subTitles = "" | split: "" %}
			{% assign sortedPages = site.pages | sort: 'menuSubIndex' %}
			{% for ape in sortedPages %}
				{% if ape.menuInclude == true and ape.menuTopTitle == topTitle and ape.menuSubTitle %}
					{% assign subTitles = subTitles | push: ape.menuSubTitle %}
				{% endif %}
			{% endfor %}
			{% assign subTitles = subTitles | reverse | uniq | reverse %}

			<li>

				<!-- Create top menu item -->
				<input type="checkbox" id="{{ topTitle | append:'-checkbox'}}">
				<label for="{{ topTitle | append:'-checkbox'}}">
					<div class="menu-item-separator"><p><!-- empty but necessary --></p></div>
					<div class="menu-item">
						<div class="menu-item-symbol">
						{% if subTitles.size > 0 %}
							<p><!-- will be filled by disclosure indicator --></p>
						{% endif %}
						</div>
						<div class="menu-item-title">
						<!-- Find page to link to -->
						{% assign pageFound = false %}
						{% for ape in site.pages %}
							{% if ape.menuTopTitle == topTitle and ape.menuSubTitle == nil %}
								{% if ape.menuLink == false %}
									<p>{{ topTitle }}</p>
								{% else %}
									<a href="{{ ape.url }}"><p>{{ topTitle }}</p></a>
								{% endif %}
								{% assign pageFound == true %}
								{% break %}
							{% endif %}
						{% endfor %}
						{% if pageFound == false %}
							<p>{{ topTitle }}</p>
						{% endif %}
						</div>
					</div>
				</label>
				
				<!-- Create sub menu items -->
				{% if subTitles.size > 0 %}
					<ul>
					{% for subTitle in subTitles %}
						{% for ape in site.pages %}
							{% if ape.menuTopTitle == topTitle and ape.menuSubTitle == subTitle %}
								{% if ape.menuLink != false %}
								<li>
									<div class="menu-subitem">
										<div class="menu-subitem-symbol"></div>
										<div class="menu-subitem-title">
											<a href="{{ ape.url }}"><p>{{ subTitle }}</p></a>
										</div>
									</div>
								</li>
								{% else %}
								<li>
									<div class="menu-subitem">
										<div class="menu-subitem-symbol"></div>
										<div class="menu-subitem-title"><p>{{ subTitle }}</p></div>
									</div>
								</li>
								{% endif %}
								{% break %}
							{% endif %}
						{% endfor %}
					{% endfor %}			
					</ul>
				{% endif %}
			</li>
		{% endfor %}

		<!-- Categories menu -->
		{% assign categories = 'Categories' %}
		{% if site.tCategories %}{% assign categories = site.tCategories %}{% endif %}
		<li>
			<input type="checkbox" id="category-checkbox">
			<label for="category-checkbox">
				<div class="menu-item-separator"><p><!-- empty but necessary --></p></div>
				<div class="menu-item">
					<div class="menu-item-symbol">
						<p><!-- empty but necessary! --></p>
					</div>
					<div class="menu-item-title">
						<p>{{ categories }}</p>
					</div>
				</div>
			</label>
			<ul>
			{% for ape in site.pages %}
				{% if ape.layout == 'category-page' %}
				<li>
					<div class="menu-subitem">
						<div class="menu-subitem-symbol"></div>
						<div class="menu-subitem-title">
							<a href="{{ ape.url }}"><p>{{ ape.title | capitalize }}</p></a>
						</div>
					</div>
				</li>
				{% endif %}
			{% endfor %}
			</ul>
		</li>
	</ul>
</nav>

<!-- Separator between navigation bar and column panel. Visibility depends on screen width. -->
<div class="nav-bottom-divider"></div>
